<!doctype html><html lang=en-us dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Getting started with Azure OpenAI | Mart's blog</title>
<meta name=keywords content="Azure,AI,GPT,OpenAI,Cognitive Search"><meta name=description content="AI is happening. How can you make sure your organization benefits from AI?"><meta name=author content="Mart de Graaf"><link rel=canonical href=https://martdegraaf.github.io/posts/getting-started-with-azure-openai/><link crossorigin=anonymous href=/assets/css/stylesheet.193ab5cf408c423fff0a8ebcacf30ee80c3524cefbc27b2a2b22b145eb66619d.css integrity="sha256-GTq1z0CMQj//Co68rPMO6Aw1JM77wnsqKyKxRetmYZ0=" rel="preload stylesheet" as=style><link rel=icon href=https://martdegraaf.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://martdegraaf.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://martdegraaf.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://martdegraaf.github.io/apple-touch-icon.png><link rel=mask-icon href=https://martdegraaf.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en-us href=https://martdegraaf.github.io/posts/getting-started-with-azure-openai/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=text/javascript>!function(e,t,n){var s,o=e.location,f="script",m="connectionString",a="ingestionendpoint",d="disableExceptionTracking",l="ai.device.",c="toLowerCase",r="crossOrigin",u="POST",h="appInsightsSDK",i=n.name||"appInsights";(n.name||e[h])&&(e[h]=i),s=e[i]||function(s){var p,g,v,j,C,k=!1,b=!1,i={initialize:!0,queue:[],sv:"5",version:2,config:s};function y(e,t){var n={},s="Browser";return n[l+"id"]=s[c](),n[l+"type"]=s,n["ai.operation.name"]=o&&o.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(i.sv||i.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}if(g=s.url||n.src,g){function E(){var r,l,d,h,f,p,v,j,_,w,O;k=!0,i.queue=[],b||(b=!0,l=g,h=function(){var t,n,o,i,r,e={},l=s.connectionString;if(l)for(o=l.split(";"),t=0;t<o.length;t++)n=o[t].split("="),2===n.length&&(e[n[0][c]()]=n[1]);return e[a]||(i=e.endpointsuffix,r=i?e.location:null,e[a]="https://"+(r?r+".":"")+"dc."+(i||"services.visualstudio.com")),e}(),f=h[m]||s[m]||"",p=h[a],r=p?p+"/v2/track":s.endpointUrl,(v=[]).push((d="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",j=l,_=r,(O=(w=y(f,"Exception")).data).baseType="ExceptionData",O.baseData.exceptions=[{typeName:"SDKLoadFailed",message:d.replace(/\./g,"-"),hasFullStack:!1,stack:d+`
Snippet failed to load [`+j+`] -- Telemetry is disabled
Help Link: https://go.microsoft.com/fwlink/?linkid=2128109
Host: `+(o&&o.pathname||"_unknown_")+`
Endpoint: `+_,parsedStack:[]}],w)),v.push(function(e,t,n,s){var o,i=y(f,"Message"),a=i.data;return a.baseType="MessageData",o=a.baseData,o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/"/g,"")+'"',o.properties={endpoint:s},i}(0,0,l,r)),function(t,s){if(JSON){var o,i=e.fetch;i&&!n.useXhr?i(s,{method:u,body:JSON.stringify(t),mode:"cors"}):XMLHttpRequest&&(o=new XMLHttpRequest,o.open(u,s),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t)))}}(v,r))}function w(e,t){b||setTimeout(function(){!t&&i.core||E()},500)}v=function(){var s,e=t.createElement(f);return e.src=g,s=n[r],!s&&""!==s||"undefined"==e[r]||(e[r]=s),e.onload=w,e.onerror=E,e.onreadystatechange=function(t,n){"loaded"!==e.readyState&&"complete"!==e.readyState||w(0,n)},e}(),n.ld<0?t.getElementsByTagName("head")[0].appendChild(v):setTimeout(function(){t.getElementsByTagName(f)[0].parentNode.appendChild(v)},n.ld||0)}try{i.cookie=t.cookie}catch{}function _(e){for(;e.length;)!function(e){i[e]=function(){var t=arguments;k||i.queue.push(function(){i[e].apply(i,t)})}}(e.pop())}var h="track",O="TrackPage",x="TrackEvent";return _([h+"Event",h+"PageView",h+"Exception",h+"Trace",h+"DependencyData",h+"Metric",h+"PageViewPerformance","start"+O,"stop"+O,"start"+x,"stop"+x,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),i.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4},C=(s.extensionConfig||{}).ApplicationInsightsAnalytics||{},!0!==s[d]&&!0!==C[d]&&(p="onerror",_(["_"+p]),j=e[p],e[p]=function(e,t,n,s,o){var a=j&&j(e,t,n,s,o);return!0!==a&&i["_"+p]({message:e,url:t,lineNumber:n,columnNumber:s,error:o}),a},s.autoExceptionInstrumented=!0),i}(n.cfg);function p(){n.onInit&&n.onInit(s)}(e[i]=s).queue&&0===s.queue.length?(s.queue.push(p),s.trackPageView({})):p()}(window,document,{src:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",crossOrigin:"anonymous",cfg:{connectionString:"InstrumentationKey=90cb325b-804c-43a9-97dd-9f34e5a0be01;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/",autoTrackPageVisitTime:!0}})</script><link rel=stylesheet href=/css/github.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZFQGR29JJQ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZFQGR29JJQ")}</script><meta property="og:url" content="https://martdegraaf.github.io/posts/getting-started-with-azure-openai/"><meta property="og:site_name" content="Mart's blog"><meta property="og:title" content="Getting started with Azure OpenAI"><meta property="og:description" content="AI is happening. How can you make sure your organization benefits from AI?"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-26T07:00:00+02:00"><meta property="article:modified_time" content="2024-05-02T21:34:05+02:00"><meta property="article:tag" content="Azure"><meta property="article:tag" content="Ai"><meta property="article:tag" content="GPT"><meta property="article:tag" content="OpenAI"><meta property="article:tag" content="Cognitive Search"><meta property="og:image" content="https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover.webp"><meta name=twitter:title content="Getting started with Azure OpenAI"><meta name=twitter:description content="AI is happening. How can you make sure your organization benefits from AI?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://martdegraaf.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Getting started with Azure OpenAI","item":"https://martdegraaf.github.io/posts/getting-started-with-azure-openai/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Getting started with Azure OpenAI","name":"Getting started with Azure OpenAI","description":"AI is happening. How can you make sure your organization benefits from AI?","keywords":["Azure","AI","GPT","OpenAI","Cognitive Search"],"articleBody":"Introduction Artificial intelligence is hip and happening. Everyone can use ChatGPT right now easily. But there are some worries about where your chats will go. Is it safe? Is the model trained by my conversations?\nAs a consultant, it is important to know the possibilities and the tradeoffs of using AI. In this article, we discuss the OpenAI services in Azure. The Azure OpenAI services promise that the data stays in your environment in the cloud. This is a minimal requirement for many companies. We will show how to use the playground, the API, and the Azure Cognitive Search integration.\nCreating your OpenAI resource Before you can start using Azure OpenAI you will need to be accepted by Microsoft. You need to apply for the ‘Azure OpenAI Service’ preview. You can do this by following the procedure to create this resource, a link to the application form is provided.\nCreate a new resource in Azure. Search for OpenAI Select the OpenAI resource Create the resource Azure Marketplace - OpenAI Using OpenAI studio After creating the resource you can go to the OpenAI studio.\nOpenAI Studio This is a web-based tool the ‘OpenAI Playground’ that allows you to test the models and see the results. You can also create your models and train them.\nCreate a new Model You can create a new model by clicking the ‘Create Model’ button. You can select the model you want to use. The default is the GPT-3 turbo model. I did my testing with the GPT-35 turbo Model. From the model, you need to make a deployment. This will take a few minutes. After the deployment is done you can start using the model. The DaVinci model can be a better fit for autocompletion and text generation. Dall-E is only available in East US.\nChat Playground In the chat playground, there are some cool features:\nAdd data sources Add system prompts Clear the chat, and view the code Parameters into the model. Import and export the setup. The Chat Playground doesn’t have a dark mode, so beware of your eyes if you do this at nighttimes.\nOpenAI Studio - Chat Playground Defining System Prompts The default will get you somewhere but you can also use the system prompts to get better results. The system prompts are a way to give the model some context. For example, if you want to create a chatbot you can use the following system prompt:\n1 2 3 4 You are an AI assistant named Mart that helps people find information. The assistant is helpful, creative, clever, and very friendly. Provide the full schedule when the user asks for a certain date. End every message with \"Mart knows everything\". Add a mermaid diagram written in markdown to clarify your statement. This kind of prompting will result in some hilarious results. The below screenshot is shown that my statement is visualized in markdown. GPT drew me a mermaid :).\nSample Chat After correcting the prompt to Add a mermaid diagram written in markdown to clarify your answer on the question.. I got the response:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Azure is a cloud computing platform that offers a wide range of resources to help users build, deploy, and manage applications and services. Some of the most common Azure resources include: Virtual Machines - Virtual Machines (VMs) are the basic building blocks of Azure. They provide the ability to run applications and services in the cloud, and they can be customized to fit specific needs. Storage Accounts - Storage Accounts are used to store data in the cloud. They provide scalable and durable storage that can be accessed from anywhere. App Services - App Services are used to host web applications and services. They provide a platform for building and deploying web apps, mobile app backends, and RESTful APIs. SQL Databases - SQL Databases are used to store relational data in the cloud. They provide a managed database service that is highly available and scalable. Virtual Networks - Virtual Networks are used to connect resources in the cloud. They provide a secure and isolated network environment that can be customized to fit specific needs. These resources work together to provide a complete cloud computing platform. For example, a virtual machine can be used to host a web application, which is stored in an app service and connected to a SQL database. Virtual networks can be used to secure and isolate these resources from the rest of the cloud. Here's a mermaid diagram to help clarify: graph LR A[Virtual Machines] --\u003e B[Storage Accounts] A --\u003e C[App Services] C --\u003e D[SQL Databases] A --\u003e E[Virtual Networks] Mart knows everything. When putting it in a mermaid renderer I got the following result:\ngraph LR A[Virtual Machines] --\u003e B[Storage Accounts] A --\u003e C[App Services] C --\u003e D[SQL Databases] A --\u003e E[Virtual Networks] This was more what I expected. Only the mermaid diagram connections don’t make sense. This is a limitation, it can’t model the connections well enough. You should check the output and test when integrating these features. ChatGPT is a statistical model, so it will give you a result that is the best fit based on its data. That does not imply everything is correct. You should always be critical at the output.\nProperties In the parameters tab, you can play with some settings. You will need to know about those to get the best results.\nMax response The Max response setting sets a limit on tokens that can be used per response. I found better results with complex prompts with the Max response just above 2000.\nTemperature The temperature is a setting that controls the randomness of the model. The higher the temperature the more random the results will be. For more theoretical information see: https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/.\nThe Top P setting works like the temperature setting, 0 is low probability and 1 is high probability. The higher the value, the more diverse probabilities will be allowed.\nDocumenting code to using OpenAI 1 2 3 4 5 6 7 8 9 10 11 12 13 14 create a mermaid diagram for the flow that is done in this c# code public static voidFibonacci_Iterative(int len) { int a = 0, b = 1, c = 0; Console.Write(\"{0} {1}\", a,b); for (int i = 2; i \u003c len; i++) { c= a + b; Console.Write(\" {0}\", c); a= b; b= c; } } This prompt resulted in the code being explained in a good flowchart. This is a great way to document your code.\n1 2 3 4 5 6 7 8 9 10 11 12 13 To create a mermaid diagram for the flow in the given C# code, you can follow these steps: Start by creating a sequenceDiagram block in your mermaid code. Add a participant for the Fibonacci_Iterative method. Add a participant for the Console class. Add a note to the Fibonacci_Iterative participant to indicate that it takes an integer parameter len. Add a note to the Console participant to indicate that it writes to the console. Add a loop block to represent the for loop in the code. Inside the loop block, add a note to indicate that c is the sum of a and b. Inside the loop block, add a note to indicate that a is assigned the value of b. Inside the loop block, add a note to indicate that b is assigned the value of c. Connect the Fibonacci_Iterative participant to the Console participant with an arrow to indicate that it writes to the console. Here's an example of what the mermaid code could look like: sequenceDiagram participant Fibonacci_Iterative participant Console Note over Fibonacci_Iterative: Takes integer parameter len Note over Console: Writes to console loop for i=2 to len Note over Fibonacci_Iterative: c = a + b Note over Fibonacci_Iterative: a = b Note over Fibonacci_Iterative: b = c end Fibonacci_Iterative-\u003e\u003eConsole: Writes to console Adding your data using Cognitive Search You can also add your data to the model. This can be done by using the Cognitive Search feature. You can upload your data and use it to train the model. You can also use the data to create completions.\nIn the playground click ‘add your data’ and click ‘+ add Data source’.\nChat playground - Add Data Source Structure Whatever you choose in the data source dropdown you will always end up with a Blob storage containing some blob files with a Cognitive Search resource. Make sure when creating the cognitive search resource you select the same region as the OpenAI resource and it has to be at least basic.\nflowchart LR OpenAI --\u003e |uses| CognitiveSearch CognitiveSearch --\u003e| indexes| BlobStorage Steps to add data Create a Blob storage account and put files in a container. I recommend using the Azure Storage Explorer. Upload some PDF files you want to be able to search for. Or use HTML pages from your public website as feed for your data source. Create a Cognitive Search resource. This has to be at least Basic, performance will be better on higher sku, but costs will be higher too. Create a data source in the Playground. Select ‘Azure Blob Storage’. Select the Blob storage resource you created. Select the container you created or want to use. Select the Cognitive Search resource you created. Enter an index name Check the box that you know about the pricing. And continue. Click Save and Close on the Review and Finish page. Wait for the Indexer to finish. You can watch the progress in the Cognitive Search resource. Navigate to the Indexers and Indexes tab. Indexers run to create the index. Cognitive Search - Indexers Chatting to your documents Now that the indexer is ready and the index is loaded, let’s chat to documents. The blob storage is fed with a slide deck of my Git presentation as PDF to the blob storage. Let’s ask GPT about Git.\nChatting with presentations Please note that in the screenshot you can choose to limit responses specific to your data content. Sources will be shown in the response. This is a great way to get insights into your data.\nCost management The basic sku on Cognitive search is a pay-per-month model, which means you should delete the resource after you are done testing with it. The OpenAI resource is pay-per-use as is the storage account.\nDeploy it to an App Service So you have now seen some power or some stupidity of the OpenAI model. You can also deploy it to an App Service. This can be on a free sku, but make sure when using this that your Chat application will be open on {your-app-name}.azurewebsites.net. You will need to configure VNET integration if you are dealing with company information.\nResource group overview As wrap up for all the resources we created during our testing. We can see the following resources in our resource group. I know you will be all testing if MartGPT is still online.\nResource group overview Using OpenAI API services through C sharp The OpenAI API is a REST API that allows you to use the models in your applications. You can use the API to create completions and chat. Some real power is when we can use the OpenAI services through our code, where we can create our business scope.\nSample case Make sure you have Include prerelease enabled when searching for the NuGet package Azure.AI.OpenAI.\nProgram.cs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 // Note: The Azure OpenAI client library for .NET is in preview. // Install the .NET library via NuGet: dotnet add package Azure.AI.OpenAI --version 1.0.0-beta.5 using Azure; using Azure.AI.OpenAI; var dieren = new[] { \"Penguins\", \"Giraffes\", \"Smurfen\", // more }; OpenAIClient client = new OpenAIClient( new Uri(\"https://martgpt-openai.openai.azure.com/\"), new AzureKeyCredential(\"HERE COMES YOUR API KEY\")); // ### If streaming is not selected foreach (var dier in dieren) { Response\u003cChatCompletions\u003e responseWithoutStream = await client.GetChatCompletionsAsync( \"MartGPT\", //\u003c= This is the deployment name new ChatCompletionsOptions() { Messages = { new ChatMessage(ChatRole.User, dier), new ChatMessage(ChatRole.User, @\"Geef antwoord in JSON met categorie property van het type string met als waarde een van deze categorien: Landdieren Zeedieren In welke categorie valt deze diersoort en geef een omschrijving met maximaal 5 woorden en geef ook de naam van het dier terug.\"), }, Temperature = (float)1, MaxTokens = 800, NucleusSamplingFactor = (float)1, FrequencyPenalty = 0, PresencePenalty = 0, }); ChatCompletions completions = responseWithoutStream.Value; foreach (var choice in completions.Choices) { Console.WriteLine(choice.Message.Content); } } The output I got from this. I laughed a lot about the response I hope you can do too. What is shown is that even Smurfen is placed in the Landdieren category. Even when you don’t edit the parameters or temperature it will give you a different response every time. You have to be very precise if you want to standardize the output.\nProgramOutput.json 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 { \"categorie\": \"Zeedieren\", \"omschrijving\": \"Vogels die niet vliegen\", \"naam\": \"Pinguïns\" } { \"naam\": \"Giraffe\", \"categorie\": \"Landdieren\", \"omschrijving\": \"Hoge nek, gevlekte vacht\" } { \"categorie\": \"Landdieren\", \"omschrijving\": \"Blauwe wezentjes in het bos\", \"naam\": \"Smurfen\" } Think of the possibilities by lowering the temperature and making materialized categories of some huge text inputs, for example in an Azure Function reacting to business events.\nConclusion I just wanted to try out the OpenAI API and see the possibilities it has. Soon corporates will be ready to use AI for their use cases and as a consultant, you should be able to advise them on the possibilities. I learned that the GPT model is statistically choosing output, and the response needs to be verified. That’s why Microsoft calls its products `Copilot``. It helps you but isn’t perfect.\nMay the AI be with you.\nFurther reading https://learn.microsoft.com/en-us/legal/cognitive-services/openai/overview\nhttps://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/completions#completion\nhttps://blog.iusmentis.com/2023/03/21/van-wie-is-mijn-werk-als-ik-chatgpt-mijn-werk-laat-doen/\nhttps://blog.iusmentis.com/2023/06/08/mag-een-iso27001-gecertificeerde-organisatie-chatgpt-gebruiken/\nhttps://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/\n","wordCount":"2345","inLanguage":"en-us","image":"https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover.webp","datePublished":"2023-10-26T07:00:00+02:00","dateModified":"2024-05-02T21:34:05+02:00","author":[{"@type":"Person","name":"Mart de Graaf"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://martdegraaf.github.io/posts/getting-started-with-azure-openai/"},"publisher":{"@type":"Organization","name":"Mart's blog","logo":{"@type":"ImageObject","url":"https://martdegraaf.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://martdegraaf.github.io/ accesskey=h title="Mart's blog (Alt + H)">Mart's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://martdegraaf.github.io/about title=About><span>About</span></a></li><li><a href=https://martdegraaf.github.io/archive title=Archive><span>Archive</span></a></li><li><a href=https://martdegraaf.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://martdegraaf.github.io/speaking title=Speaking><span>Speaking</span></a></li><li><a href=https://martdegraaf.github.io/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class="main page"><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Getting started with Azure OpenAI</h1><div class=post-meta><span title='2023-10-26 07:00:00 +0200 +0200'>October 26, 2023</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;2345 words&nbsp;·&nbsp;Mart de Graaf</div></header><figure class=entry-cover><img loading=eager srcset="https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover_hu6653638289167491194.webp 360w ,https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover_hu13079765334315307702.webp 480w ,https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover_hu10698806553602754224.webp 720w ,https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover.webp 1024w" sizes="(min-width: 768px) 720px, 100vw" src=https://martdegraaf.github.io/posts/getting-started-with-azure-openai/cover.webp alt="A sophisticated and modern digital-themed blog cover image for a blog about getting started with Azure OpenAI." width=1024 height=1024><p>A sophisticated and modern digital-themed blog cover image for a blog about getting started with Azure OpenAI.</p></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#creating-your-openai-resource aria-label="Creating your OpenAI resource">Creating your OpenAI resource</a></li><li><a href=#using-openai-studio aria-label="Using OpenAI studio">Using OpenAI studio</a><ul><li><a href=#create-a-new-model aria-label="Create a new Model">Create a new Model</a></li><li><a href=#chat-playground aria-label="Chat Playground">Chat Playground</a></li><li><a href=#defining-system-prompts aria-label="Defining System Prompts">Defining System Prompts</a></li></ul></li><li><a href=#properties aria-label=Properties>Properties</a><ul><li><a href=#max-response aria-label="Max response">Max response</a></li><li><a href=#temperature aria-label=Temperature>Temperature</a></li></ul></li><li><a href=#documenting-code-to-using-openai aria-label="Documenting code to using OpenAI">Documenting code to using OpenAI</a></li><li><a href=#adding-your-data-using-cognitive-search aria-label="Adding your data using Cognitive Search">Adding your data using Cognitive Search</a><ul><li><a href=#structure aria-label=Structure>Structure</a></li><li><a href=#steps-to-add-data aria-label="Steps to add data">Steps to add data</a></li><li><a href=#chatting-to-your-documents aria-label="Chatting to your documents">Chatting to your documents</a></li><li><a href=#cost-management aria-label="Cost management">Cost management</a></li></ul></li><li><a href=#deploy-it-to-an-app-service aria-label="Deploy it to an App Service">Deploy it to an App Service</a><ul><li><a href=#resource-group-overview aria-label="Resource group overview">Resource group overview</a></li></ul></li><li><a href=#using-openai-api-services-through-c-sharp aria-label="Using OpenAI API services through C sharp">Using OpenAI API services through C sharp</a><ul><li><a href=#sample-case aria-label="Sample case">Sample case</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#further-reading aria-label="Further reading">Further reading</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).parentNode.classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).parentNode.classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).parentNode.classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Artificial intelligence is hip and happening. Everyone can use ChatGPT right now easily. But there are some worries about where your chats will go. Is it safe? Is the model trained by my conversations?</p><p>As a consultant, it is important to know the possibilities and the tradeoffs of using AI.
In this article, we discuss the OpenAI services in Azure. The Azure OpenAI services promise that the data stays in your environment in the cloud. This is a minimal requirement for many companies. We will show how to use the playground, the API, and the Azure Cognitive Search integration.</p><h2 id=creating-your-openai-resource>Creating your OpenAI resource<a hidden class=anchor aria-hidden=true href=#creating-your-openai-resource>#</a></h2><p>Before you can start using Azure OpenAI you will need to be accepted by Microsoft. You need to apply for the &lsquo;Azure OpenAI Service&rsquo; preview. You can do this by following the procedure to create this resource, a link to the application form is provided.</p><ol><li>Create a new resource in Azure.</li><li>Search for OpenAI</li><li>Select the OpenAI resource</li><li>Create the resource</li></ol><p><figure><img loading=lazy src=marketplace-openai.png#center alt="Azure Marketplace - OpenAI" title="Azure Marketplace - OpenAI"><figcaption style=text-align:center>Azure Marketplace - OpenAI</figcaption></figure></p><h2 id=using-openai-studio>Using OpenAI studio<a hidden class=anchor aria-hidden=true href=#using-openai-studio>#</a></h2><p>After creating the resource you can go to the OpenAI studio.</p><p><figure><img loading=lazy src=openai_studio.png#center alt="OpenAI Studio" title="OpenAI Studio"><figcaption style=text-align:center>OpenAI Studio</figcaption></figure></p><p>This is a web-based tool the &lsquo;OpenAI Playground&rsquo; that allows you to test the models and see the results. You can also create your models and train them.</p><h3 id=create-a-new-model>Create a new Model<a hidden class=anchor aria-hidden=true href=#create-a-new-model>#</a></h3><p>You can create a new model by clicking the &lsquo;Create Model&rsquo; button. You can select the model you want to use. The default is the GPT-3 turbo model. I did my testing with the GPT-35 turbo Model. From the model, you need to make a deployment. This will take a few minutes. After the deployment is done you can start using the model. The DaVinci model can be a better fit for autocompletion and text generation. Dall-E is only available in East US.</p><h3 id=chat-playground>Chat Playground<a hidden class=anchor aria-hidden=true href=#chat-playground>#</a></h3><p>In the chat playground, there are some cool features:</p><ol><li>Add data sources</li><li>Add system prompts</li><li>Clear the chat, and view the code</li><li>Parameters into the model.</li><li>Import and export the setup.</li></ol><p>The Chat Playground doesn&rsquo;t have a dark mode, so beware of your eyes if you do this at nighttimes.</p><p><figure><img loading=lazy src=chat_playground.png#center alt="OpenAI Studio - Chat Playground" title="OpenAI Studio - Chat Playground"><figcaption style=text-align:center>OpenAI Studio - Chat Playground</figcaption></figure></p><h3 id=defining-system-prompts>Defining System Prompts<a hidden class=anchor aria-hidden=true href=#defining-system-prompts>#</a></h3><p>The default will get you somewhere but you can also use the system prompts to get better results. The system prompts are a way to give the model some context. For example, if you want to create a chatbot you can use the following system prompt:</p><div class=codecontainer hi=mart><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>You are an AI assistant named Mart that helps people find information. The assistant is helpful, creative, clever, and very friendly.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Provide the full schedule when the user asks for a certain date.
</span></span><span class=line><span class=cl>End every message with &#34;Mart knows everything&#34;. Add a mermaid diagram written in markdown to clarify your statement.</span></span></code></pre></td></tr></table></div></div></div><p>This kind of prompting will result in some hilarious results. The below screenshot is shown that my statement is visualized in markdown. GPT drew me a mermaid :).</p><p><figure><img loading=lazy src=sample-chat.png#center alt="Chat Playground" title="Sample Chat"><figcaption style=text-align:center>Sample Chat</figcaption></figure></p><p>After correcting the prompt to <code>Add a mermaid diagram written in markdown to clarify your answer on the question.</code>. I got the response:</p><div class=codecontainer hi=mart><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Azure is a cloud computing platform that offers a wide range of resources to help users build, deploy, and manage applications and services. Some of the most common Azure resources include:
</span></span><span class=line><span class=cl>Virtual Machines - Virtual Machines (VMs) are the basic building blocks of Azure. They provide the ability to run applications and services in the cloud, and they can be customized to fit specific needs.
</span></span><span class=line><span class=cl>Storage Accounts - Storage Accounts are used to store data in the cloud. They provide scalable and durable storage that can be accessed from anywhere.
</span></span><span class=line><span class=cl>App Services - App Services are used to host web applications and services. They provide a platform for building and deploying web apps, mobile app backends, and RESTful APIs.
</span></span><span class=line><span class=cl>SQL Databases - SQL Databases are used to store relational data in the cloud. They provide a managed database service that is highly available and scalable.
</span></span><span class=line><span class=cl>Virtual Networks - Virtual Networks are used to connect resources in the cloud. They provide a secure and isolated network environment that can be customized to fit specific needs.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>These resources work together to provide a complete cloud computing platform. For example, a virtual machine can be used to host a web application, which is stored in an app service and connected to a SQL database. Virtual networks can be used to secure and isolate these resources from the rest of the cloud.
</span></span><span class=line><span class=cl>Here&#39;s a mermaid diagram to help clarify:
</span></span><span class=line><span class=cl>graph LR  
</span></span><span class=line><span class=cl>A[Virtual Machines] --&gt; B[Storage Accounts]  
</span></span><span class=line><span class=cl>A --&gt; C[App Services]  
</span></span><span class=line><span class=cl>C --&gt; D[SQL Databases]  
</span></span><span class=line><span class=cl>A --&gt; E[Virtual Networks]  
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>Mart knows everything.</span></span></code></pre></td></tr></table></div></div></div><p>When putting it in a mermaid renderer I got the following result:</p><pre class=mermaid>graph LR  
A[Virtual Machines] --> B[Storage Accounts]  
A --> C[App Services]  
C --> D[SQL Databases]  
A --> E[Virtual Networks]  
</pre><p>This was more what I expected. Only the mermaid diagram connections don&rsquo;t make sense. This is a limitation, it can&rsquo;t model the connections well enough. You should check the output and test when integrating these features. ChatGPT is a statistical model, so it will give you a result that is the best fit based on its data. That does not imply everything is correct. You should always be critical at the output.</p><h2 id=properties>Properties<a hidden class=anchor aria-hidden=true href=#properties>#</a></h2><p>In the parameters tab, you can play with some settings. You will need to know about those to get the best results.</p><h3 id=max-response>Max response<a hidden class=anchor aria-hidden=true href=#max-response>#</a></h3><p>The <code>Max response</code> setting sets a limit on tokens that can be used per response. I found better results with complex prompts with the Max response just above 2000.</p><h3 id=temperature>Temperature<a hidden class=anchor aria-hidden=true href=#temperature>#</a></h3><p>The temperature is a setting that controls the randomness of the model. The higher the temperature the more random the results will be. For more theoretical information see: <a href=https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/ target=_blank rel=noopener>https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/</a>.</p><p>The <code>Top P</code> setting works like the temperature setting, 0 is low probability and 1 is high probability. The higher the value, the more diverse probabilities will be allowed.</p><h2 id=documenting-code-to-using-openai>Documenting code to using OpenAI<a hidden class=anchor aria-hidden=true href=#documenting-code-to-using-openai>#</a></h2><div class=codecontainer hi=mart><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>create a mermaid diagram for the flow that is done in this c# code   
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>public static voidFibonacci_Iterative(int len)    
</span></span><span class=line><span class=cl>{    
</span></span><span class=line><span class=cl>    int a = 0, b = 1, c = 0;    
</span></span><span class=line><span class=cl>    Console.Write(&#34;{0} {1}&#34;, a,b);    
</span></span><span class=line><span class=cl>    for (int i = 2; i &lt; len; i++)    
</span></span><span class=line><span class=cl>    {    
</span></span><span class=line><span class=cl>        c= a + b;    
</span></span><span class=line><span class=cl>        Console.Write(&#34; {0}&#34;, c);    
</span></span><span class=line><span class=cl>        a= b;    
</span></span><span class=line><span class=cl>        b= c;    
</span></span><span class=line><span class=cl>    }    
</span></span><span class=line><span class=cl>}  </span></span></code></pre></td></tr></table></div></div></div><p>This prompt resulted in the code being explained in a good flowchart. This is a great way to document your code.</p><div class=codecontainer hi=mart><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>To create a mermaid diagram for the flow in the given C# code, you can follow these steps:
</span></span><span class=line><span class=cl>Start by creating a sequenceDiagram block in your mermaid code.
</span></span><span class=line><span class=cl>Add a participant for the Fibonacci_Iterative method.
</span></span><span class=line><span class=cl>Add a participant for the Console class.
</span></span><span class=line><span class=cl>Add a note to the Fibonacci_Iterative participant to indicate that it takes an integer parameter len.
</span></span><span class=line><span class=cl>Add a note to the Console participant to indicate that it writes to the console.
</span></span><span class=line><span class=cl>Add a loop block to represent the for loop in the code.
</span></span><span class=line><span class=cl>Inside the loop block, add a note to indicate that c is the sum of a and b.
</span></span><span class=line><span class=cl>Inside the loop block, add a note to indicate that a is assigned the value of b.
</span></span><span class=line><span class=cl>Inside the loop block, add a note to indicate that b is assigned the value of c.
</span></span><span class=line><span class=cl>Connect the Fibonacci_Iterative participant to the Console participant with an arrow to indicate that it writes to the console.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Here&#39;s an example of what the mermaid code could look like:</span></span></code></pre></td></tr></table></div></div></div><pre class=mermaid>sequenceDiagram  
    participant Fibonacci_Iterative  
    participant Console  
  
    Note over Fibonacci_Iterative: Takes integer parameter len  
    Note over Console: Writes to console  
  
    loop for i=2 to len  
        Note over Fibonacci_Iterative: c = a + b  
        Note over Fibonacci_Iterative: a = b  
        Note over Fibonacci_Iterative: b = c  
    end  
  
    Fibonacci_Iterative->>Console: Writes to console  
 
</pre><h2 id=adding-your-data-using-cognitive-search>Adding your data using Cognitive Search<a hidden class=anchor aria-hidden=true href=#adding-your-data-using-cognitive-search>#</a></h2><p>You can also add your data to the model. This can be done by using the Cognitive Search feature. You can upload your data and use it to train the model. You can also use the data to create completions.</p><p>In the playground click &lsquo;add your data&rsquo; and click &lsquo;+ add Data source&rsquo;.</p><p><figure><img loading=lazy src=chat_playground_add_data_source.png#center alt="Chat Playground - add data source" title="Chat playground - Add Data Source"><figcaption style=text-align:center>Chat playground - Add Data Source</figcaption></figure></p><h3 id=structure>Structure<a hidden class=anchor aria-hidden=true href=#structure>#</a></h3><p>Whatever you choose in the data source dropdown you will always end up with a Blob storage containing some blob files with a Cognitive Search resource. Make sure when creating the cognitive search resource you select the same region as the OpenAI resource and it has to be at least basic.</p><pre class=mermaid>flowchart LR
OpenAI --> |uses| CognitiveSearch
CognitiveSearch -->| indexes| BlobStorage
</pre><h3 id=steps-to-add-data>Steps to add data<a hidden class=anchor aria-hidden=true href=#steps-to-add-data>#</a></h3><ol><li>Create a Blob storage account and put files in a container. I recommend using the Azure Storage Explorer. Upload some PDF files you want to be able to search for. Or use HTML pages from your public website as feed for your data source.</li><li>Create a Cognitive Search resource. This has to be at least Basic, performance will be better on higher sku, but costs will be higher too.</li><li>Create a data source in the Playground.<ul><li>Select &lsquo;Azure Blob Storage&rsquo;.</li><li>Select the Blob storage resource you created.</li><li>Select the container you created or want to use.</li><li>Select the Cognitive Search resource you created.</li><li>Enter an index name</li><li>Check the box that you know about the pricing. And continue.</li><li>Click Save and Close on the Review and Finish page.</li></ul></li><li>Wait for the Indexer to finish. You can watch the progress in the Cognitive Search resource. Navigate to the Indexers and Indexes tab. Indexers run to create the index.</li></ol><p><figure><img loading=lazy src=cognitive_search_indexers.png#center alt="Cognitive Search - Indexers" title="Cognitive Search - Indexers"><figcaption style=text-align:center>Cognitive Search - Indexers</figcaption></figure></p><h3 id=chatting-to-your-documents>Chatting to your documents<a hidden class=anchor aria-hidden=true href=#chatting-to-your-documents>#</a></h3><p>Now that the indexer is ready and the index is loaded, let&rsquo;s chat to documents. The blob storage is fed with a slide deck of my Git presentation as PDF to the blob storage. Let&rsquo;s ask GPT about Git.</p><p><figure><img loading=lazy src=playground_chat_with_data_source_git.png#center alt="Chatting with presentations" title="Chatting with presentations"><figcaption style=text-align:center>Chatting with presentations</figcaption></figure></p><p>Please note that in the screenshot you can choose to limit responses specific to your data content. Sources will be shown in the response. This is a great way to get insights into your data.</p><h3 id=cost-management>Cost management<a hidden class=anchor aria-hidden=true href=#cost-management>#</a></h3><p>The basic sku on Cognitive search is a pay-per-month model, which means you should delete the resource after you are done testing with it. The OpenAI resource is pay-per-use as is the storage account.</p><h2 id=deploy-it-to-an-app-service>Deploy it to an App Service<a hidden class=anchor aria-hidden=true href=#deploy-it-to-an-app-service>#</a></h2><p>So you have now seen some power or some stupidity of the OpenAI model. You can also deploy it to an App Service. This can be on a free sku, but make sure when using this that your Chat application will be open on {your-app-name}.azurewebsites.net. You will need to configure VNET integration if you are dealing with company information.</p><h3 id=resource-group-overview>Resource group overview<a hidden class=anchor aria-hidden=true href=#resource-group-overview>#</a></h3><p>As wrap up for all the resources we created during our testing. We can see the following resources in our resource group. I know you will be all testing if MartGPT is still online.</p><p><figure><img loading=lazy src=resource_group_overview.png#center alt="Resource group overview" title="Resource group overview"><figcaption style=text-align:center>Resource group overview</figcaption></figure></p><h2 id=using-openai-api-services-through-c-sharp>Using OpenAI API services through C sharp<a hidden class=anchor aria-hidden=true href=#using-openai-api-services-through-c-sharp>#</a></h2><p>The OpenAI API is a REST API that allows you to use the models in your applications. You can use the API to create completions and chat. Some real power is when we can use the OpenAI services through our code, where we can create our business scope.</p><h3 id=sample-case>Sample case<a hidden class=anchor aria-hidden=true href=#sample-case>#</a></h3><p>Make sure you have <code>Include prerelease</code> enabled when searching for the NuGet package <code>Azure.AI.OpenAI</code>.</p><div class=codecontainer hi=mart><div class=code-name>Program.cs</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=c1>// Note: The Azure OpenAI client library for .NET is in preview.</span>
</span></span><span class=line><span class=cl><span class=c1>// Install the .NET library via NuGet: dotnet add package Azure.AI.OpenAI --version 1.0.0-beta.5 </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>Azure</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>Azure.AI.OpenAI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>dieren</span> <span class=p>=</span> <span class=k>new</span><span class=p>[]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Penguins&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Giraffes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Smurfen&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// more</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>OpenAIClient</span> <span class=n>client</span> <span class=p>=</span> <span class=k>new</span> <span class=n>OpenAIClient</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Uri</span><span class=p>(</span><span class=s>&#34;https://martgpt-openai.openai.azure.com/&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>AzureKeyCredential</span><span class=p>(</span><span class=s>&#34;HERE COMES YOUR API KEY&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ### If streaming is not selected</span>
</span></span><span class=line><span class=cl><span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>dier</span> <span class=k>in</span> <span class=n>dieren</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Response</span><span class=p>&lt;</span><span class=n>ChatCompletions</span><span class=p>&gt;</span> <span class=n>responseWithoutStream</span> <span class=p>=</span> <span class=k>await</span> <span class=n>client</span><span class=p>.</span><span class=n>GetChatCompletionsAsync</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;MartGPT&#34;</span><span class=p>,</span> <span class=c1>//&lt;= This is the deployment name</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>ChatCompletionsOptions</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Messages</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>ChatMessage</span><span class=p>(</span><span class=n>ChatRole</span><span class=p>.</span><span class=n>User</span><span class=p>,</span> <span class=n>dier</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>ChatMessage</span><span class=p>(</span><span class=n>ChatRole</span><span class=p>.</span><span class=n>User</span><span class=p>,</span> <span class=s>@&#34;Geef antwoord in JSON met categorie property van het type string met als waarde een van deze categorien:
</span></span></span><span class=line><span class=cl><span class=s>Landdieren
</span></span></span><span class=line><span class=cl><span class=s>Zeedieren
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>In welke categorie valt deze diersoort en geef een omschrijving met maximaal 5 woorden en geef ook de naam van het dier terug.&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>Temperature</span> <span class=p>=</span> <span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=m>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>MaxTokens</span> <span class=p>=</span> <span class=m>800</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>NucleusSamplingFactor</span> <span class=p>=</span> <span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=m>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>FrequencyPenalty</span> <span class=p>=</span> <span class=m>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>PresencePenalty</span> <span class=p>=</span> <span class=m>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=n>ChatCompletions</span> <span class=n>completions</span> <span class=p>=</span> <span class=n>responseWithoutStream</span><span class=p>.</span><span class=n>Value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>choice</span> <span class=k>in</span> <span class=n>completions</span><span class=p>.</span><span class=n>Choices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>choice</span><span class=p>.</span><span class=n>Message</span><span class=p>.</span><span class=n>Content</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div><p>The output I got from this. I laughed a lot about the response I hope you can do too. What is shown is that even <code>Smurfen</code> is placed in the <code>Landdieren</code> category. Even when you don&rsquo;t edit the parameters or temperature it will give you a different response every time. You have to be very precise if you want to standardize the output.</p><div class=codecontainer hi=mart><div class=code-name>ProgramOutput.json</div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;categorie&#34;</span><span class=p>:</span> <span class=s2>&#34;Zeedieren&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;omschrijving&#34;</span><span class=p>:</span> <span class=s2>&#34;Vogels die niet vliegen&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;naam&#34;</span><span class=p>:</span> <span class=s2>&#34;Pinguïns&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;naam&#34;</span><span class=p>:</span> <span class=s2>&#34;Giraffe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;categorie&#34;</span><span class=p>:</span> <span class=s2>&#34;Landdieren&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;omschrijving&#34;</span><span class=p>:</span> <span class=s2>&#34;Hoge nek, gevlekte vacht&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;categorie&#34;</span><span class=p>:</span> <span class=s2>&#34;Landdieren&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;omschrijving&#34;</span><span class=p>:</span> <span class=s2>&#34;Blauwe wezentjes in het bos&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;naam&#34;</span><span class=p>:</span> <span class=s2>&#34;Smurfen&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div><p>Think of the possibilities by lowering the temperature and making materialized categories of some huge text inputs, for example in an Azure Function reacting to business events.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>I just wanted to try out the OpenAI API and see the possibilities it has. Soon corporates will be ready to use AI for their use cases and as a consultant, you should be able to advise them on the possibilities. I learned that the GPT model is statistically choosing output, and the response needs to be verified. That&rsquo;s why Microsoft calls its products `Copilot``. It helps you but isn&rsquo;t perfect.</p><p>May the AI be with you.</p><h2 id=further-reading>Further reading<a hidden class=anchor aria-hidden=true href=#further-reading>#</a></h2><ul><li><p><a href=https://learn.microsoft.com/en-us/legal/cognitive-services/openai/overview target=_blank rel=noopener>https://learn.microsoft.com/en-us/legal/cognitive-services/openai/overview</a></p></li><li><p><a href=https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/completions#completion target=_blank rel=noopener>https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/completions#completion</a></p></li><li><p><a href=https://blog.iusmentis.com/2023/03/21/van-wie-is-mijn-werk-als-ik-chatgpt-mijn-werk-laat-doen/ target=_blank rel=noopener>https://blog.iusmentis.com/2023/03/21/van-wie-is-mijn-werk-als-ik-chatgpt-mijn-werk-laat-doen/</a></p></li><li><p><a href=https://blog.iusmentis.com/2023/06/08/mag-een-iso27001-gecertificeerde-organisatie-chatgpt-gebruiken/ target=_blank rel=noopener>https://blog.iusmentis.com/2023/06/08/mag-een-iso27001-gecertificeerde-organisatie-chatgpt-gebruiken/</a></p></li><li><p><a href=https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/ target=_blank rel=noopener>https://writings.stephenwolfram.com/2023/02/what-is-chatgpt-doing-and-why-does-it-work/</a></p></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://martdegraaf.github.io/tags/azure/>Azure</a></li><li><a href=https://martdegraaf.github.io/tags/ai/>Ai</a></li><li><a href=https://martdegraaf.github.io/tags/gpt/>GPT</a></li><li><a href=https://martdegraaf.github.io/tags/openai/>OpenAI</a></li><li><a href=https://martdegraaf.github.io/tags/cognitive-search/>Cognitive Search</a></li></ul><nav class=paginav><a class=prev href=https://martdegraaf.github.io/posts/consulting/foreach-repo-push-and-pr/><span class=title>«</span><br><span>Foreach repository push files and create a pull request</span>
</a><a class=next href=https://martdegraaf.github.io/posts/azure-application-insights-in-control-of-costs/><span class=title>»</span><br><span>Learn how to verify the biggest costs of your Log Analytics workspace</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on x" href="https://x.com/intent/tweet/?text=Getting%20started%20with%20Azure%20OpenAI&amp;url=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f&amp;hashtags=Azure%2cAI%2cGPT%2cOpenAI%2cCognitiveSearch"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f&amp;title=Getting%20started%20with%20Azure%20OpenAI&amp;summary=Getting%20started%20with%20Azure%20OpenAI&amp;source=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f&title=Getting%20started%20with%20Azure%20OpenAI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on whatsapp" href="https://api.whatsapp.com/send?text=Getting%20started%20with%20Azure%20OpenAI%20-%20https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on telegram" href="https://telegram.me/share/url?text=Getting%20started%20with%20Azure%20OpenAI&amp;url=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Getting started with Azure OpenAI on ycombinator" href="https://news.ycombinator.com/submitlink?t=Getting%20started%20with%20Azure%20OpenAI&u=https%3a%2f%2fmartdegraaf.github.io%2fposts%2fgetting-started-with-azure-openai%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=martdegraaf/martdegraaf.github.io data-repo-id=R_kgDOHu1qyg data-category=General data-category-id=DIC_kwDOHu1qys4CfotY data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=en data-loading=lazy crossorigin=anonymous async></script><script>window.setInterval(function(){const e=document.querySelector("iframe.giscus-frame");if(!e)return;document.body.classList.contains("dark")?e.contentWindow.postMessage({giscus:{setConfig:{theme:"dark"}}},"https://giscus.app"):e.contentWindow.postMessage({giscus:{setConfig:{theme:"light"}}},"https://giscus.app")},1e3)</script></article><script type=module>
  import mermaid from 'https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs';
  import mindmap from 'https://unpkg.com/@mermaid-js/mermaid-mindmap@9/dist/mermaid-mindmap.esm.min.mjs';
  await mermaid.registerExternalDiagrams([mindmap]);
    var config = {
            startOnLoad:true,
            htmlLabels:true,
            flowchart:{
                useMaxWidth:false,
            },
            
            theme: document.body.className.includes("dark") ?  'dark' : 'corperate',
            
            logLevel: "5",
            themeVariables:{
              darkMode: document.body.className.includes("dark")
            },
            gantt: {
              axisFormat: "%m-%d"
            }

        };
        mermaid.initialize(config);

        document.getElementById("theme-toggle").addEventListener("click", () => {
          location.reload();

        });
</script></main><footer class=footer><span>Mart de Graaf</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>